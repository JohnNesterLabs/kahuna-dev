<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modern Scrolling Website</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    * {
      box-sizing: border-box;
    }

    .section-wrapper {
      height: 300vh;
      position: relative;
    }

    .section-content {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: sticky;
      top: 0;
    }

    .nav-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #9ca3af;
      cursor: pointer;
      transition: all 0.3s;
    }

    .nav-dot:hover {
      background: #4b5563;
    }

    .nav-dot.active {
      background: #1f2937;
      transform: scale(1.25);
    }

    .floating-video {
      position: fixed;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 40;
      width: 256px;
      height: 144px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    .video-placeholder {
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom right, #a855f7, #ec4899);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
    }

    .pinned-image {
      width: 100%;
      max-width: 500px;
      height: 500px;
      background: linear-gradient(to bottom right, #60a5fa, #6366f1);
      border-radius: 24px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      font-weight: 600;
    }


    .neon-border {
      position: relative;
    }

    .neon-border::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg,
          transparent 0%,
          #00ffff 20%,
          #ff00ff 50%,
          #00ffff 80%,
          transparent 100%);
      box-shadow:
        0 0 10px #00ffff,
        0 0 20px #00ffff,
        0 0 30px #00ffff;
      animation: neonGlow 2s ease-in-out infinite alternate;
    }

    @keyframes neonGlow {
      from {
        opacity: 0.8;
        box-shadow:
          0 0 10px #00ffff,
          0 0 20px #00ffff,
          0 0 30px #00ffff;
      }

      to {
        opacity: 1;
        box-shadow:
          0 0 15px #00ffff,
          0 0 25px #00ffff,
          0 0 35px #00ffff,
          0 0 45px #ff00ff;
      }
    }

    /* Pinned Section Styles */
    .pinned-section {
      height: 100vh;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .pinned-inner {
      width: 100%;
      max-width: 1200px;
      display: flex;
      gap: 36px;
      align-items: center;
      padding: 24px;
      box-sizing: border-box;
    }

    .pinned-left {
      width: 100%;
      height: 70vh;
      position: relative;
      display: block;
    }

    .frame-container {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 95%;
      max-width: 520px;
      height: 70vh;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .frame {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      opacity: 0;
      will-change: transform, opacity;
      position: absolute;
      top: 0;
      left: 0;
    }

    .section-label {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      font-weight: 600;
      background: rgba(255, 255, 255, 0.9);
      padding: 18px 22px;
      border-radius: 10px;
      opacity: 0;
      max-width: 420px;
      color: #333;
    }

    .pinned-right {
      width: 0.1%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .image-wrap {
      width: 100%;
      max-width: 420px;
      height: min(62vh, 620px);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.4);
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }


    @media (max-width: 900px) {
      .pinned-inner {
        flex-direction: column-reverse;
        gap: 20px;
        padding: 16px;
      }

      .pinned-left,
      .pinned-right {
        width: 100%;
        height: auto;
      }

      .pinned-left {
        height: auto;
        padding: 60px 0;
      }

      .section-label {
        position: relative;
        transform: none;
        top: auto;
        left: auto;
        margin: 12px auto;
      }

      .image-wrap {
        height: 44vh;
        max-width: 90%;
      }

      .frame-container {
        width: 100%;
        max-width: 90%;
        height: 50vh;
      }
    }

    @media (max-width: 768px) {
      .floating-video {
        width: 200px;
        height: 112px;
      }

    }
  </style>
</head>

<body class="bg-white">

  <!-- Navigation Dots -->
  <div class="fixed right-8 top-1/2 -translate-y-1/2 z-50 flex flex-col gap-4">
    <div class="nav-dot active" data-section="0"></div>
    <div class="nav-dot" data-section="1"></div>
    <div class="nav-dot" data-section="2"></div>
    <div class="nav-dot" data-section="3"></div>
    <div class="nav-dot" data-section="4"></div>
  </div>

  <!-- Floating Video -->
  <div class="floating-video" id="floatingVideo">
    <div class="video-placeholder">
      Video Placeholder
    </div>
  </div>

  <!-- Section 1 -->
  <div class="section-wrapper neon-border" id="section1Wrapper">
    <div class="section-content bg-[#F5F1E8]">
      <div class="text-center px-4">
        <h1 class="section1-line1 text-6xl md:text-8xl font-bold text-gray-800 mb-8 opacity-0">
          Welcome
        </h1>
        <h2 class="section1-line2 text-4xl md:text-6xl font-light text-gray-600 mb-8 opacity-0">
          to Modern Design
        </h2>
        <p class="section1-line3 text-3xl md:text-5xl font-light text-gray-500 opacity-0">
          Experience the Future
        </p>
      </div>
    </div>
  </div>

  <!-- Section 2 -->
  <div class="section-wrapper neon-border" id="section2Wrapper">
    <div class="section-content bg-[#E5E5E5]">
      <div class="text-center px-4">
        <h2 class="section2-line1 text-5xl md:text-7xl font-semibold text-gray-800 mb-8 opacity-0">
          Smooth Scrolling
        </h2>
        <p class="section2-line2 text-3xl md:text-5xl font-light text-gray-600 mb-8 opacity-0">
          Enhanced Experience
        </p>
        <p class="section2-line3 text-3xl md:text-5xl font-light text-gray-500 opacity-0">
          Built for Performance
        </p>
      </div>
    </div>
  </div>

  <!-- Section 3 -->
  <div class="section-wrapper neon-border" id="section3Wrapper">
    <div class="section-content bg-white">
      <div class="text-center px-4">
        <h2 class="section3-line1 text-5xl md:text-7xl font-semibold text-gray-800 mb-8 opacity-0">
          Interactive
        </h2>
        <p class="section3-line2 text-3xl md:text-5xl font-light text-gray-600 mb-8 opacity-0">
          & Engaging Content
        </p>
        <p class="section3-line3 text-3xl md:text-5xl font-light text-gray-500 opacity-0">
          Designed to Inspire
        </p>
      </div>
    </div>
  </div>

  <!-- Section 4 - Pinned Section -->
  <div class="pinned-section neon-border" id="section4Wrapper">
    <div class="pinned-inner">
      <!-- Left: Frame container for animated frames -->
      <div class="pinned-left">
        <div class="frame-container" id="frame-container">
          <!-- First frame as fallback -->
          <img src="public/frames-desktop-webp/frame_0001.webp" class="frame" id="frame-1" alt="Frame 1"
            style="opacity: 1;" />
          <!-- Additional frames will be dynamically loaded here -->
        </div>
        <div class="section-label" id="section-label">
          Pinned Content Area
        </div>
      </div>
      <!-- Right: Single image used for all sections -->
      <div class="pinned-right">
        <div class="image-wrap" id="the-image">
          <img src="public/new-model.png" alt="Pinned visual" />
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Section -->
  <div class="section-wrapper neon-border" id="footerWrapper">
    <div class="section-content bg-gray-50">
      <div class="text-center px-4">
        <h2 class="text-4xl md:text-6xl font-bold text-gray-800 mb-8">
          Thank You
        </h2>
        <p class="text-xl md:text-2xl text-gray-600 mb-4">
          For experiencing our modern scrolling journey
        </p>
        <p class="text-lg text-gray-500">
          Built with passion using the latest web technologies
        </p>
      </div>
    </div>
  </div>

  <script>
    // Register GSAP ScrollTrigger plugin
    gsap.registerPlugin(ScrollTrigger);

    // Ensure ScrollTrigger is properly initialized
    ScrollTrigger.config({
      ignoreMobileResize: true,
      syncInterval: 1
    });

    // Active section tracking
    let activeSection = 0;
    const navDots = document.querySelectorAll('.nav-dot');
    const video = document.getElementById('floatingVideo');

    function updateNavDots(section) {
      activeSection = section;
      navDots.forEach((dot, index) => {
        if (index === section) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }

    // Navigation dot click handlers
    navDots.forEach(dot => {
      dot.addEventListener('click', () => {
        const section = parseInt(dot.getAttribute('data-section'));
        let targetEl;
        if (section === 0) targetEl = document.getElementById('section1Wrapper');
        else if (section === 1) targetEl = document.getElementById('section2Wrapper');
        else if (section === 2) targetEl = document.getElementById('section3Wrapper');
        else if (section === 3) targetEl = document.getElementById('section4Wrapper');
        else if (section === 4) targetEl = document.getElementById('footerWrapper');
        targetEl?.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Section 1: 3 lines appear sequentially
    gsap.set(['.section1-line1', '.section1-line2', '.section1-line3'], {
      opacity: 0,
      y: 50
    });

    gsap.timeline({
      scrollTrigger: {
        trigger: '#section1Wrapper',
        start: 'top top',
        end: 'bottom bottom',
        scrub: 1,
        onUpdate: (self) => {
          if (self.progress < 0.9) {
            updateNavDots(0);
          }
        }
      }
    })
      .to('.section1-line1', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" })
      .to('.section1-line2', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" })
      .to('.section1-line3', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" });

    // Video moves from bottom to right (between Section 1 and 2)
    gsap.timeline({
      scrollTrigger: {
        trigger: '#section1Wrapper',
        start: 'bottom center',
        end: 'bottom top',
        scrub: 1
      }
    })
      .to(video, {
        bottom: '50%',
        left: '80%',
        x: '-50%',
        y: '50%',
        scale: 1,
        duration: 1
      });

    // Section 2: 3 lines appear sequentially
    gsap.set(['.section2-line1', '.section2-line2', '.section2-line3'], {
      opacity: 0,
      y: 50
    });

    gsap.timeline({
      scrollTrigger: {
        trigger: '#section2Wrapper',
        start: 'top top',
        end: 'bottom bottom',
        scrub: 1,
        onUpdate: (self) => {
          if (self.progress > 0.1 && self.progress < 0.9) {
            updateNavDots(1);
          }
        }
      }
    })
      .to('.section2-line1', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" })
      .to('.section2-line2', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" })
      .to('.section2-line3', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" });

    // Video moves from right to center (between Section 2 and 3)
    gsap.timeline({
      scrollTrigger: {
        trigger: '#section2Wrapper',
        start: 'bottom center',
        end: 'bottom top',
        scrub: 1
      }
    })
      .to(video, {
        bottom: '50%',
        left: '50%',
        x: '-50%',
        y: '50%',
        scale: 1.1,
        duration: 1
      });

    // Section 3: 3 lines appear sequentially
    gsap.set(['.section3-line1', '.section3-line2', '.section3-line3'], {
      opacity: 0,
      y: 50
    });

    gsap.timeline({
      scrollTrigger: {
        trigger: '#section3Wrapper',
        start: 'top top',
        end: 'bottom bottom',
        scrub: 1,
        onUpdate: (self) => {
          if (self.progress > 0.1) {
            updateNavDots(2);
          }
        }
      }
    })
      .to('.section3-line1', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" })
      .to('.section3-line2', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" })
      .to('.section3-line3', { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" });

    // Hide video after section 3
    gsap.timeline({
      scrollTrigger: {
        trigger: '#section3Wrapper',
        start: 'bottom center',
        end: 'bottom top',
        scrub: 1
      }
    })
      .to(video, { opacity: 0, scale: 0.8, duration: 0.5 });

    // Section 4: Pinned section with frame animation
    gsap.set(['.section4-line1', '.section4-line2', '.section4-line3'], {
      opacity: 0,
      y: 50
    });

    // Initialize pinned section frames
    const totalFrames = 428; // Use all available frames
    const frameContainer = document.getElementById('frame-container');
    const frames = ['#frame-1'];

    // Create additional frame elements
    for (let i = 2; i <= totalFrames; i++) {
      const frameNumber = i.toString().padStart(4, '0');
      const img = document.createElement('img');
      img.className = 'frame';
      img.id = `frame-${i}`;
      img.alt = `Frame ${i}`;
      frameContainer.appendChild(img);
      frames.push(`#frame-${i}`);
    }

    // Set all frames as hidden initially
    gsap.set(frames, { autoAlpha: 0 });
    gsap.set('#frame-1', { autoAlpha: 1 });

    // Pinned section scroll trigger
    let currentFrameIndex = 0;
    ScrollTrigger.create({
      trigger: '#section4Wrapper',
      start: 'top top',
      end: '+=2500%', // Increased scroll distance for 428 frames
      scrub: 1,
      pin: true,
      onUpdate: (self) => {
        // Keep navigation on section 3 (pinned section) until all frames are shown
        if (self.progress < 0.95) {
          updateNavDots(3);
        } else {
          // Move to footer only after all frames are shown
          updateNavDots(4);
        }

        // Calculate which frame should be shown
        const targetFrameIndex = Math.floor(self.progress * (totalFrames - 1));

        if (targetFrameIndex !== currentFrameIndex && targetFrameIndex >= 0 && targetFrameIndex < totalFrames) {
          // Hide current frame
          if (frames[currentFrameIndex]) {
            gsap.set(frames[currentFrameIndex], { autoAlpha: 0 });
          }

          // Show new frame
          const newFrameSel = frames[targetFrameIndex];
          const frameElement = document.getElementById(`frame-${targetFrameIndex + 1}`);

          // Load frame image if not already loaded
          if (frameElement && !frameElement.src) {
            const frameNumber = (targetFrameIndex + 1).toString().padStart(4, '0');
            frameElement.src = `public/frames-desktop-webp/frame_${frameNumber}.webp`;
          }

          gsap.set(newFrameSel, { autoAlpha: 1 });
          currentFrameIndex = targetFrameIndex;
        }
      }
    });


    // Refresh ScrollTrigger after all animations are set up
    // This ensures proper initialization across all browsers
    ScrollTrigger.refresh();

    // Additional refresh on window load for Safari/Firefox compatibility
    window.addEventListener('load', () => {
      ScrollTrigger.refresh();
    });

    // Handle resize events
    window.addEventListener('resize', () => {
      ScrollTrigger.refresh();
    });
  </script>

</body>

</html>